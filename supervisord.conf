# d:\Git\binance-bot\binance-telegram-bot-1\supervisord.conf
[supervisord]
nodaemon=true
user=root

# Секция для запуска скрипта инициализации БД (запустится один раз)
[program:db_setup]
command=/opt/bot/start.sh
autostart=true
autorestart=false
startretries=0

# Секция для запуска и контроля PostgreSQL
[program:postgresql]
command=/usr/lib/postgresql/14/bin/postgres -D /var/lib/postgresql/14/main -c config_file=/etc/postgresql/14/main/postgresql.conf
user=postgres
autostart=true
autorestart=true
priority=10

# Секция для запуска и контроля вашего Java-бота
[program:binance-bot]
command=java -jar /opt/bot/app.jar
directory=/opt/bot
autostart=true
autorestart=true
priority=20 # Приоритет выше, чтобы бот стартовал после БД